# 任务计划（2026-02-20）

## 目标
- 按 Go 生产级最佳实践修复当前仓库高优先级问题。
- 修复完成后可通过 `go test ./...`、`go test -race ./...`、`go build ./...`。
- 全程记录修复进度，便于发布前审阅。

## 阶段
- [completed] 阶段 1：文档落盘（计划/发现/进度）
- [completed] 阶段 2：安全修复（凭据回退与接口访问控制）
- [completed] 阶段 3：稳定性修复（全局限流、失败取消、原子写）
- [completed] 阶段 4：补充测试与验证
- [completed] 阶段 5：更新说明文档与交付总结

## 风险与约束
- 不回退用户已有改动。
- 尽量保持 API 兼容；涉及行为变更时通过配置开关提供过渡。
- 以最小改动优先修复 P0/P1 问题。

## 错误记录
- 错误：`requireAPIAccess` 首版实现返回 `error`，但 `writeError` 成功写响应时返回 `nil`，导致鉴权拦截无效。
- 处理：改为返回 `bool`，失败时直接写响应并 `return nil` 中断 handler。
